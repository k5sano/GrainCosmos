# Parameter Specification: GrainCosmos

**CRITICAL CONTRACT:** This specification is immutable during implementation.

**Generated by:** UI mockup finalization (ui-mockup skill, v3)
**Generated date:** 2026-02-12

## Total Parameter Count

**Total:** 10 parameters (8 sliders + 2 toggles)

## Parameter Definitions

### delay_time
- **Type:** Float
- **Range:** 0.0 to 2.0 seconds
- **Default:** 0.5s
- **Skew Factor:** 0.5 (logarithmic feel)
- **UI Control:** Rotary knob, top row, left position (x: 60, y: 80)
- **DSP Usage:** Main delay time parameter for granular delay engine

### grain_size
- **Type:** Float
- **Range:** 10.0 to 500.0 milliseconds
- **Default:** 100.0ms
- **Skew Factor:** 0.4 (logarithmic feel)
- **UI Control:** Rotary knob, top row, second position (x: 220, y: 80)
- **DSP Usage:** Granular synthesis grain size

### envelope_shape
- **Type:** Float
- **Range:** 0.0 to 1.0
- **Default:** 0.5
- **Skew Factor:** linear
- **UI Control:** Rotary knob, top row, third position (x: 380, y: 80)
- **DSP Usage:** Delay grain envelope shape (ADSR)

### distortion_amount
- **Type:** Float
- **Range:** 0.0 to 100.0 percent
- **Default:** 0.0%
- **Skew Factor:** linear
- **UI Control:** Rotary knob, top row, right position (x: 540, y: 80)
- **DSP Usage:** Waveshaping/distortion amount

### feedback
- **Type:** Float
- **Range:** 0.0 to 95.0 percent
- **Default:** 40.0%
- **Skew Factor:** linear
- **UI Control:** Rotary knob, bottom row, left position (x: 60, y: 240)
- **DSP Usage:** Delay feedback amount

### chaos
- **Type:** Float
- **Range:** 0.0 to 100.0 percent
- **Default:** 20.0%
- **Skew Factor:** linear
- **UI Control:** Rotary knob, bottom row, second position (x: 220, y: 240)
- **DSP Usage:** Randomization/modulation amount

### character
- **Type:** Float
- **Range:** 0.0 to 100.0 percent
- **Default:** 50.0%
- **Skew Factor:** linear
- **UI Control:** Rotary knob with purple glow, bottom row, third position (x: 380, y: 240)
- **DSP Usage:** Timbral character/color control
- **Special:** Focal point with glow effect in UI

### mix
- **Type:** Float
- **Range:** 0.0 to 100.0 percent
- **Default:** 30.0%
- **Skew Factor:** linear
- **UI Control:** Rotary knob, bottom row, right position (x: 540, y: 240)
- **DSP Usage:** Dry/wet mix balance

### freeze
- **Type:** Bool
- **Range:** On/Off
- **Default:** Off (false)
- **UI Control:** Toggle switch, footer area (x: 640, y: 275)
- **DSP Usage:** Freeze/hold current granular buffer

### tempo_sync
- **Type:** Bool
- **Range:** On/Off
- **Default:** Off (false)
- **UI Control:** Toggle switch, footer area (x: 60, y: 425)
- **DSP Usage:** Enable tempo synchronization for delay time

## Notes

- Parameters are implemented in EXACT order during Stage 2 (Shell)
- Parameter IDs must remain consistent across all stages
- UI controls implemented from v3 mockup during Stage 3 (GUI)
- All parameters use AudioParameterFloat except freeze and tempo_sync (AudioParameterBool)
- Skew factors applied in APVTS creation for logarithmic feel on time-based parameters
- Character parameter has visual glow effect for UI differentiation
- Window size: 800Ã—500px (fixed, not resizable)

## Implementation Order (Stage 2)

Parameters should be declared in AudioProcessorValueTreeState in this order:

1. delay_time (Float)
2. grain_size (Float)
3. envelope_shape (Float)
4. distortion_amount (Float)
5. feedback (Float)
6. chaos (Float)
7. character (Float)
8. mix (Float)
9. freeze (Bool)
10. tempo_sync (Bool)

## UI Layout Reference

**Top Row (y: 80):**
- DELAY (delay_time) - x: 60
- GRAIN (grain_size) - x: 220
- ENVELOPE (envelope_shape) - x: 380
- DISTORTION (distortion_amount) - x: 540

**Bottom Row (y: 240):**
- FEEDBACK (feedback) - x: 60
- CHAOS (chaos) - x: 220
- CHARACTER (character) - x: 380 (with glow)
- MIX (mix) - x: 540

**Footer:**
- FREEZE (freeze) - x: 640, y: 275
- SYNC (tempo_sync) - x: 60, y: 425

## Visual Design Notes

**Aesthetic:** Vintage hardware with aging/relic appearance
- Chassis color: Olive-gray (#4a4a3a to #2a2a1a)
- Knobs: Retro silver measurement instrument style
  - Tapered conical shape
  - Knurled/gripping texture
  - Chrome/metallic silver finish
- Indicators: Purple gradient (#9b4dca to #b47eff)
- Text: Gold color (#ffd89b)
- Logo: Japanese brush pen / handwritten marker font
- Aging effects: Scratches, rust patches, worn paint, chipped edges, grease smudges
